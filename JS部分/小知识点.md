# 小知识点

## for click循环问题

```js
const lists = document.querySelectorAll('li')
for(var i = 0; i < lists.length; i++) {
  lists[i].onclick = function () {
    alert(i)
  }
}
```

**问题：** 上面的代码，每次点击的时候都是alert(3)

**原因：** 作用域问题，在点击的时候再去取i的值，已经是lists.length了，使用let创建i，不会出现这个问题

**解决方法:** 使用闭包 或者 使用let创建i

```js
// 闭包解决
const lists = document.querySelectorAll('li')
for(var i = 0; i < lists.length; i++) {
  (function() {
    lists[i].onclick = function() {
      alert(i)
    }
  })(i)
}
```

**原因：** 在上面的情况中，i是全局变量，在onclick时间触发的时候，访问的是全局变量i，所以i一直都是3，如果放在闭包中执行，实参传递到形参的时候，非引用类型的实参会复制一份给形参，而不是共享一份


