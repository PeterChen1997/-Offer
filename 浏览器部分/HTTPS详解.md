# HTTPS详解

## HTTP与HTTPS的区别

- 端口：80 / 443
- 传输加密：否 / 是
- 连接成本：低 / 高

## HTTPS

相比HTTP多了个S，其实指的是应用层和传输层中间的TLS/SSL的加密

### TLS / SSL

全称Transport Layer Security和他的前身 SSL（Secure Sockets Layer）都是一种安全协议，旨在为互联网通信传输提供安全及数据完整性保障

#### SSL

SSL包括记录层与传输层，记录层协议确定传输层数据的封装格式。传输层安全协议使用X.509认证，之后利用非对称加密演算来对通信方做身份认证，之后交换对称密钥作为会谈密钥（Session key）

这个会谈密钥是用来将通信两方交换的数据做加密，保证两个应用间通信的保密性和可靠性，使客户与服务器应用之间的通信不被攻击者窃听

#### TLS

连接建立流程：

- 客户端连接到支持TLS协议的服务器，并列出支持的密码组合（加密密码算法+加密哈希算法），第一次握手开始
- 服务器从该列表中决定加密和散列函数，并通知客户端
- 服务器发回数字证书（包含服务器名称，CA证书与公钥）
- 客户端验证证书有效性
- 客户端使用服务器发回的公钥加密随机生成的密钥，发送到服务器，只有服务器的私钥才能解密
- 利用随机数，双方生成用于加密和解密的对称密钥

## 不加密存在的风险

- 窃听风险
- 篡改风险
- 冒充风险