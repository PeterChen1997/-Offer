# Topic

## 建立连接-TCP的三次握手

(1) 主机向服务器发送一个建立连接的请求；

(2) 服务器接到请求后发送同意连接的信号；

(3) 主机接到同意连接的信号后，再次向服务器发送了确认信号 ;

> 发送端首先发送一个带SYN标志的数据包给对方。接收端收到后，回传一个带有SYN/ACK标志的数据包以示传达确认信息。  最后，发送端再回传一个带ACK标志的数据包，代表“握手”结束。  若在握手过程中某个阶段莫名中断，TCP协议会再次以相同的顺序发送相同的数据包

## 断开连接-TCP的四次挥手

(1) 主机向服务器发送一个断开连接的请求；

(2) 服务器接到请求后发送确认收到请求的信号；(此时服务器可能还有数据要发送至主机)

(3) 服务器向主机发送断开通知；(此时服务器确认没有要向主机发送的数据)

(4) 主机接到断开通知后断开连接并反馈一个确认信号，服务器收到确认信号后断开连接；

注意：这里的四次挥手中服务器两次向主机发送消息，第一次是回复主机已收到断开的请求，第二次是向主机确认是否断开，确保数据传输完毕。

> 通过FIN与ACK

![imgs](http://onb5ufwvw.bkt.clouddn.com/18-3-15/74784181.jpg)
