(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{400:function(s,a,t){"use strict";t.r(a);var e=t(25),o=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"浏览器存储"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器存储"}},[s._v("#")]),s._v(" 浏览器存储")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AD%98%E5%82%A8"}},[s._v("浏览器存储")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#cookie--session"}},[s._v("cookie / session")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#cookie"}},[s._v("cookie")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#token"}},[s._v("token")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#session"}},[s._v("session")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#%E7%89%B9%E7%82%B9"}},[s._v("特点")])])])])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#web-storage"}},[s._v("Web Storage")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#localstorage"}},[s._v("localStorage")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#taobao%E7%9A%84%E5%A6%99%E7%94%A8"}},[s._v("Taobao的妙用")])])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#sessionstorage"}},[s._v("sessionStorage")])])])]),s._v(" "),t("li",[t("a",{attrs:{href:"#indexdb"}},[s._v("IndexDB")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#cookie-sessionstorage-%E5%92%8C-localstorage-%E7%9A%84%E5%8C%BA%E5%88%AB"}},[s._v("cookie sessionStorage 和 localStorage 的区别")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#%E7%94%A8%E6%B3%95%E4%B8%8D%E5%90%8C"}},[s._v("用法不同")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#%E5%AD%98%E5%82%A8%E5%A4%A7%E5%B0%8F"}},[s._v("存储大小")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#%E6%9C%89%E6%95%88%E6%97%B6%E9%97%B4"}},[s._v("有效时间")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8D%E5%90%8C"}},[s._v("作用域不同")])])])])])])]),s._v(" "),t("p",[s._v("在前端的数据展示和身份认证方面，不可避免的需要暂时或者持久的，保存一定量的数据在浏览器本地，避免将所有数据存入内存，过度占用系统资源")]),s._v(" "),t("p",[s._v("下面就来看看一共有几种方法可以进行浏览器存储")]),s._v(" "),t("h2",{attrs:{id:"cookie-session"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie-session"}},[s._v("#")]),s._v(" cookie / session")]),s._v(" "),t("p",[s._v("cookie与session属于传统的身份认证方式，也可在其中存储数据，今天来好好研究一下cookie与token在身份认证方面的差异，与cookie与session的异同")]),s._v(" "),t("p",[s._v("HTTP是一种没有状态的协议，它并不知道是那个客户端在访问应用。所以在客户端发起对身份有要求的请求中，需要携带认证信息。")]),s._v(" "),t("h3",{attrs:{id:"cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[s._v("#")]),s._v(" cookie")]),s._v(" "),t("p",[s._v("cookie可以在每次发送HTTP请求的时候传递给服务器端，所以可用cookie存储会话状态，在其中可以保存一些相关数据")]),s._v(" "),t("ul",[t("li",[s._v("可以保存用户喜好或者保存用户名密码")]),s._v(" "),t("li",[s._v("保存当前会话在服务器的唯一ID(session ID)")])]),s._v(" "),t("p",[s._v("但是需要注意，为了不在传输cookie的过程中耗费太多网络资源，有最大"),t("code",[s._v("4KB")]),s._v("的大小限制")]),s._v(" "),t("blockquote",[t("p",[s._v("若被禁用，则可以使用URL重写、表单隐藏字段等方法，婉转实现")])]),s._v(" "),t("h3",{attrs:{id:"token"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#token"}},[s._v("#")]),s._v(" token")]),s._v(" "),t("p",[s._v("token认证机制主要使用在stateless的rest API调用中，一般我们会在用户登录成功后,在本地保存服务器生成的token，用作之后用户进行相关权限活动的证明，保证了登录状态的持续性")]),s._v(" "),t("p",[s._v("在安全性方面，为了防止token的盗用，可以将请求URL、时间戳、token三者进行合并加盐签名，在服务端校验有效即可")]),s._v(" "),t("h3",{attrs:{id:"session"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#session"}},[s._v("#")]),s._v(" session")]),s._v(" "),t("p",[s._v("在这里，我们首先要了解清楚，"),t("code",[s._v("session的实现")]),s._v("和"),t("code",[s._v("session")]),s._v("的区别")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("session")]),s._v(" 是一个抽象概念，开发者为了实现中断和继续等操作，将 user agent 和 server 之间一对一的交互，抽象为“会话”，进而衍生出“会话状态”，也就是 session 的概念")]),s._v(" "),t("li",[s._v("而我们今天常说的 session，是为了绕开 cookie 的各种限制，通常借助 cookie 本身和后端存储实现的，一种更高级的会话状态"),t("strong",[s._v("实现")])])]),s._v(" "),t("p",[s._v("那我们这里主要讲的是session的实现中的，cookie与session的异同")]),s._v(" "),t("h4",{attrs:{id:"特点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[s._v("#")]),s._v(" 特点")]),s._v(" "),t("ul",[t("li",[s._v("cookie在客户端，session在服务端")]),s._v(" "),t("li",[s._v("cookie安全性较低，不可将机密数据不加密存在cookie中")]),s._v(" "),t("li",[s._v("session访问量大时，会占用内存，影响性能")])]),s._v(" "),t("h2",{attrs:{id:"web-storage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#web-storage"}},[s._v("#")]),s._v(" Web Storage")]),s._v(" "),t("p",[s._v("Web Storage API 提供机制， 使浏览器能以一种比使用Cookie更直观的方式存储键/值对")]),s._v(" "),t("h3",{attrs:{id:"localstorage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#localstorage"}},[s._v("#")]),s._v(" localStorage")]),s._v(" "),t("p",[s._v("是 HTML5 的本地存储，将数据保存在客户端中（一般是永久的)")]),s._v(" "),t("ul",[t("li",[s._v("添加键值对：localStorage.setItem(key,value)")]),s._v(" "),t("li",[s._v("获取键值：localStorage.getItem(key)")]),s._v(" "),t("li",[s._v("删除键值对：localStorage.removeItem(key)。")]),s._v(" "),t("li",[s._v("清除所有键值对：localStorage.clear()。")]),s._v(" "),t("li",[s._v("获取localStorage的属性名称（键名称）：localStorage.key(index)。")])]),s._v(" "),t("h4",{attrs:{id:"taobao的妙用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#taobao的妙用"}},[s._v("#")]),s._v(" Taobao的妙用")]),s._v(" "),t("p",[s._v("第一次访问后，使用localStorage存储base64处理后的图片地址，节约二次请求时消耗的服务器资源")]),s._v(" "),t("h3",{attrs:{id:"sessionstorage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sessionstorage"}},[s._v("#")]),s._v(" sessionStorage")]),s._v(" "),t("p",[s._v("它与 localStorage 相似，不同之处在于 localStorage 里面存储的数据没有过期时间设置，而存储在 sessionStorage 里面的数据在页面会话结束时会被清除")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 保存数据到sessionStorage")]),s._v("\nsessionStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'key'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从sessionStorage获取数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" data "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sessionStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'key'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从sessionStorage删除保存的数据")]),s._v("\nsessionStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'key'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从sessionStorage删除所有保存的数据")]),s._v("\nsessionStorage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("clear")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h2",{attrs:{id:"indexdb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#indexdb"}},[s._v("#")]),s._v(" IndexDB")]),s._v(" "),t("p",[s._v("IndexedDB 是一个用于在浏览器中储存较大数据结构的 Web API, 并提供索引功能以实现高性能查找. 像其他基于 SQL 的 关系型数据库管理系统 (RDBMS) 一样, IndexedDB 是一个事务型的数据库系统. 然而, 它是使用 JavaScript 对象而非列数固定的表格来储存数据的")]),s._v(" "),t("p",[s._v("用得比较少，之后如果用到会回来补充的")]),s._v(" "),t("h2",{attrs:{id:"cookie-sessionstorage-和-localstorage-的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie-sessionstorage-和-localstorage-的区别"}},[s._v("#")]),s._v(" cookie sessionStorage 和 localStorage 的区别")]),s._v(" "),t("h3",{attrs:{id:"用法不同"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用法不同"}},[s._v("#")]),s._v(" 用法不同")]),s._v(" "),t("ul",[t("li",[s._v("cookie:\n"),t("ul",[t("li",[s._v("cookie是网站为了标示用户身份而储存在用户本地终端（Client Side）上的数据（通常经过加密）。")]),s._v(" "),t("li",[s._v("cookie数据始终在同源的http请求中携带（即使不需要），记会在浏览器和服务器间来回传递。")])])]),s._v(" "),t("li",[s._v("sessionStorage和localStorage不会自动把数据发给服务器，仅在本地保存")])]),s._v(" "),t("h3",{attrs:{id:"存储大小"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#存储大小"}},[s._v("#")]),s._v(" 存储大小")]),s._v(" "),t("ul",[t("li",[s._v("cookie数据大小不能超过4k")]),s._v(" "),t("li",[s._v("sessionStorage和localStorage 虽然也有存储大小的限制，但比cookie大得多，可以达到5M或更大")])]),s._v(" "),t("h3",{attrs:{id:"有效时间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#有效时间"}},[s._v("#")]),s._v(" 有效时间")]),s._v(" "),t("ul",[t("li",[s._v("localStorage    存储持久数据，浏览器关闭后数据不丢失除非主动删除数据")]),s._v(" "),t("li",[s._v("sessionStorage  数据在当前浏览器窗口关闭后自动删除")]),s._v(" "),t("li",[s._v("cookie          设置的cookie过期时间之前一直有效，即使窗口或浏览器关闭")])]),s._v(" "),t("h3",{attrs:{id:"作用域不同"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#作用域不同"}},[s._v("#")]),s._v(" 作用域不同")]),s._v(" "),t("ul",[t("li",[s._v("sessionStorage不在不同的浏览器窗口中共享，即使是同一个页面")]),s._v(" "),t("li",[s._v("localStorage 在所有同源窗口中都是共享的")]),s._v(" "),t("li",[s._v("cookie也是在所有同源窗口中都是共享的")])]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("前端方面常见的存储方式就这么多，才疏学浅，欢迎读者提出建议")])])}),[],!1,null,null,null);a.default=o.exports}}]);